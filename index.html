<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gyroscope Example</title>
    <style>
        #object {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: red;
        }
    </style>
</head>

<body>
    <div id="object"></div>
    <div>
        Sensitivity X: <input type="number" id="sensitivityX" value="0.2" step="0.1" min="0" max="1">
    </div>
    <div>
        Sensitivity Y: <input type="number" id="sensitivityY" value="0.2" step="0.1" min="0" max="1">
    </div>

    <script>
        function updateFieldIfNotNull(fieldName, value, precision = 10) {
            if (value != null)
                document.getElementById(fieldName).innerHTML = value.toFixed(precision);
        }

        let object = document.getElementById("object");
        let velocityX = 0;
        let velocityY = 0;
        let lastTime = null;
        let sensitivityX = 0.2; // Initial sensitivity for X-axis
        let sensitivityY = 0.2; // Initial sensitivity for Y-axis
        const damping = 0.8; // Damping factor for simulating inertia

        // Center the object in the middle of the screen
        const screenWidth = window.innerWidth;
        const screenHeight = window.innerHeight;
        const initialLeft = (screenWidth - object.offsetWidth) / 2;
        const initialTop = (screenHeight - object.offsetHeight) / 2;
        object.style.left = `${initialLeft}px`;
        object.style.top = `${initialTop}px`;

        function handleOrientation(event) {
            const alpha = event.alpha;
            const beta = event.beta;

            updateFieldIfNotNull("Gyroscope_alpha", alpha);
            updateFieldIfNotNull("Gyroscope_beta", beta);

            // Update sensitivity values from input fields
            sensitivityX = parseFloat(document.getElementById("sensitivityX").value);
            sensitivityY = parseFloat(document.getElementById("sensitivityY").value);

            // Calculate time difference since last update
            const currentTime = Date.now();
            const deltaTime = lastTime ? (currentTime - lastTime) / 1000 : 0;

            // Calculate new velocity based on gyroscope data and sensitivity
            velocityX += beta * sensitivityX * deltaTime;
            velocityY += alpha * sensitivityY * deltaTime;

            // Apply damping to simulate inertia
            velocityX *= damping;
            velocityY *= damping;

            // Update object position
            const newLeft = object.offsetLeft + velocityX;
            const newTop = object.offsetTop + velocityY;

            // Ensure the object stays within the bounds of the screen
            object.style.left = `${Math.min(Math.max(newLeft, 0), screenWidth - object.offsetWidth)}px`;
            object.style.top = `${Math.min(Math.max(newTop, 0), screenHeight - object.offsetHeight)}px`;

            // Update lastTime for next iteration
            lastTime = currentTime;
        }

        window.addEventListener('deviceorientation', handleOrientation);
    </script>
</body>

</html>